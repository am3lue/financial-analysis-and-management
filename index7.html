<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Financial Analysis & Management</title>
<link rel="icon" href="images/images.png">

<style>
:root {
    --primary: #1a3faa;
    --success: #0a7a3b;
    --danger: #a40000;
    --bg: #f4f6f8;
}

* { box-sizing: border-box; }

body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: var(--bg);
    color: #222;
    margin: 0;
    padding: 20px;
}

h1 {
    text-align: center;
    font-size: 38px;
}

h2, h3 {
    text-align: center;
    margin-top: 30px;
}

.container {
    max-width: 1000px;
    margin: auto;
}

.day {
    background: #fff;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 12px;
    display: grid;
    grid-template-columns: 1fr 2fr 2fr;
    align-items: center;
    gap: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.day h4 {
    margin: 0;
    text-align: center;
}

input {
    width: 110px;
    padding: 6px;
    font-size: 16px;
}

button {
    padding: 6px 12px;
    font-size: 15px;
    cursor: pointer;
    border-radius: 5px;
    border: none;
    background: var(--primary);
    color: white;
}

button.secondary {
    background: #555;
}

button:hover { opacity: 0.9; }

.report {
    background: white;
    border-radius: 12px;
    padding: 25px;
    margin-top: 30px;
    box-shadow: 0 4px 14px rgba(0,0,0,0.12);
}

.summary {
    display: flex;
    gap: 15px;
    margin-top: 20px;
}

.card {
    flex: 1;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    font-weight: bold;
}

.income { background: #e8fff0; color: var(--success); }
.expense { background: #ffecec; color: var(--danger); }
.profit { background: #eef3ff; color: var(--primary); }

.extras ul {
    list-style: none;
    padding: 0;
}

.extras li {
    display: flex;
    justify-content: space-between;
    padding: 8px;
    border-left: 4px solid var(--danger);
    background: #fafafa;
    margin-bottom: 6px;
}

</style>
</head>

<body>
<div class="container">

<h1>Financial Analysis & Management</h1>

<h2>Weekly Income & Expenses</h2>
<div id="days"></div>

<h3>Extra Expenses</h3>
<input type="text" id="extraReason" placeholder="Expense reason">
<input type="number" id="extraAmount" placeholder="Amount">
<button onclick="addExtra()">Add</button>

<br><br>
<button onclick="analyze()">Weekly Analysis</button>
<button class="secondary" onclick="endWeek()">End Week</button>

<div id="result"></div>

</div>

<script>
(() => {
const dayNames = ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
const container = document.getElementById("days");

const state = {
    weekData: JSON.parse(localStorage.getItem("weekData")) || {
        incomes: Array(7).fill(0),
        expenses: Array(7).fill(0)
    },
    extras: JSON.parse(localStorage.getItem("extrasData")) || {}
};

// Render days
dayNames.forEach((day, i) => {
    container.insertAdjacentHTML("beforeend", `
        <div class="day">
            <h4>${day}</h4>
            <div>
                Income<br>
                <input type="number" id="income${i}" value="${state.weekData.incomes[i]}">
                <button onclick="addIncome(${i})">Add</button>
            </div>
            <div>
                Expense<br>
                <input type="number" id="expense${i}" value="${state.weekData.expenses[i]}">
                <button onclick="addExpense(${i})">Add</button>
            </div>
        </div>
    `);
});

window.addIncome = i => {
    const v = Number(document.getElementById(`income${i}`).value);
    if (!v) return;
    state.weekData.incomes[i] += v;
    save();
};

window.addExpense = i => {
    const v = Number(document.getElementById(`expense${i}`).value);
    if (!v) return;
    state.weekData.expenses[i] += v;
    save();
};

window.addExtra = () => {
    const r = extraReason.value.trim();
    const a = Number(extraAmount.value);
    if (!r || !a) return;
    state.extras[r] = (state.extras[r] || 0) + a;
    save();
    extraReason.value = "";
    extraAmount.value = "";
};

window.analyze = () => {
    const income = state.weekData.incomes.reduce((a,b)=>a+b,0);
    const expense = state.weekData.expenses.reduce((a,b)=>a+b,0);
    const profit = income - expense;

    const dailyProfit = state.weekData.incomes.map((v,i)=>v-state.weekData.expenses[i]);
    const best = dayNames[dailyProfit.indexOf(Math.max(...dailyProfit))];
    const worst = dayNames[dailyProfit.indexOf(Math.min(...dailyProfit))];

    let extrasHTML = "";
    let extrasTotal = 0;

    for (let k in state.extras) {
        extrasHTML += `<li><span>${k}</span><span>${state.extras[k]} €</span></li>`;
        extrasTotal += state.extras[k];
    }

    document.getElementById("result").innerHTML = `
        <div class="report">
            <h3>Weekly Report</h3>
            <div class="summary">
                <div class="card income">Income<br>${income} €</div>
                <div class="card expense">Expenses<br>${expense} €</div>
                <div class="card profit">Profit<br>${profit} €</div>
            </div>
            <div class="extras">
                <h4>Extra Expenses</h4>
                <ul>${extrasHTML || "<li>No extra expenses</li>"}</ul>
                <strong>Total Extras: ${extrasTotal} €</strong>
            </div>
            <p>⭐ Best Day: <b>${best}</b><br>⚠ Worst Day: <b>${worst}</b></p>
        </div>
    `;
};

window.endWeek = () => {
    analyze();
    localStorage.clear();
    location.reload();
};

function save() {
    localStorage.setItem("weekData", JSON.stringify(state.weekData));
    localStorage.setItem("extrasData", JSON.stringify(state.extras));
}
})();

</script>
</body>
</html>
